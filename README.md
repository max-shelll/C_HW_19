# Домашнее задание к работе 19

## Условие задачи
Разработайте программу, которая записывает в файл поля структуры задания 3 работы 18    
При выборе формата вывода данных следует помнить, что функция scanf будет читать строку (%s) до первого пробела, следовательно    
1) строка записи по каждому спецификатору %s не должна содержать пробелы (например, "Домик_в_лесу")    
2) после спецификатора %s должен следовать разделитель (пробел, перевод строки, табуляция) , иначе при чтении следующий символ считается вместе со строкой, а в буфере останется не интерпретируемый набор символов.    
3) в конце каждой записи должен быть конец строки ('\n') или собственный разделитель    
## 1. Реализация программы
```
#include <stdio.h>
#include <locale.h>

typedef struct {
    char title[100];
    int year;
    char style[50];
    int tracks;
    double duration;
} Album;

void input_album(Album* a);
void print_album(const Album a);
void print_suitable_albums(const Album arr[], int n);
int writefile(const char* fname, const Album* arr, int size);

int main() {
    setlocale(LC_ALL, "RUS");

    int n = 5;
    Album arr[10];

    printf("Ввод альбомов:\n");
    for (int i = 0; i < n; i++) {
        printf("\n=== Альбом %d ===\n", i + 1);
        input_album(&arr[i]);
    }

    printf("\nВсе альбомы:\n");
    for (int i = 0; i < n; i++) {
        print_album(arr[i]);
    }

    print_suitable_albums(arr, n);

    if (writefile("albums.txt", arr, n)) {
        printf("\nФайл успешно записан.\n");
    }

    return 0;
}


void input_album(Album* a) {
    printf("Введите название (без пробелов, используйте _ ): ");
    scanf("%99s", (*a).title);

    printf("Введите год выпуска: ");
    scanf("%d", &(*a).year);

    printf("Введите стиль (без пробелов): ");
    scanf("%49s", (*a).style);

    printf("Введите количество треков: ");
    scanf("%d", &(*a).tracks);

    printf("Введите длительность (минуты): ");
    scanf("%lf", &(*a).duration);
}

void print_album(const Album a) {
    printf("\nНазвание: %s\n", a.title);
    printf("Год выпуска: %d\n", a.year);
    printf("Стиль: %s\n", a.style);
    printf("Количество треков: %d\n", a.tracks);
    printf("Длительность: %.2f минут\n", a.duration);
}

void print_suitable_albums(const Album arr[], int n) {
    printf("\nПодходящие альбомы:\n");

    int found = 0;
    for (int i = 0; i < n; i++) {
        if (arr[i].tracks >= 10 && arr[i].duration <= 50.0) {
            print_album(arr[i]);
            found = 1;
        }
    }

    if (!found) {
        printf("Нет подходящих альбомов.\n");
    }
}

int writefile(const char* fname, const Album* arr, int size) {
    FILE* out = fopen(fname, "wt");
    if (out == NULL) {
        printf("Ошибка открытия файла!\n");
        return 0;
    }

    for (int i = 0; i < size; i++) {
        fprintf(out, "%s %d %s %d %.2f\n",
            arr[i].title,
            arr[i].year,
            arr[i].style,
            arr[i].tracks,
            arr[i].duration);
    }

    fclose(out);
    return 1;
}
```

## 2. Результаты работы программы
```
Ввод альбомов:

=== Альбом 1 ===
Введите название (без пробелов, используйте _ ): test_v1
Введите год выпуска: 2000
Введите стиль (без пробелов): v1
Введите количество треков: 50
Введите длительность (минуты): 50

=== Альбом 2 ===
Введите название (без пробелов, используйте _ ): test_v2
Введите год выпуска: 2001
Введите стиль (без пробелов): v2
Введите количество треков: 60
Введите длительность (минуты): 60

=== Альбом 3 ===
Введите название (без пробелов, используйте _ ): test_v3
Введите год выпуска: 2002
Введите стиль (без пробелов): v3
Введите количество треков: 70
Введите длительность (минуты): 70

=== Альбом 4 ===
Введите название (без пробелов, используйте _ ): test_v4
Введите год выпуска: 2003
Введите стиль (без пробелов): v4
Введите количество треков: 80
Введите длительность (минуты): 80

=== Альбом 5 ===
Введите название (без пробелов, используйте _ ): test_v4
Введите год выпуска: 2004
Введите стиль (без пробелов): v5
Введите количество треков: 90
Введите длительность (минуты): 90

Все альбомы:

Название: test_v1
Год выпуска: 2000
Стиль: v1
Количество треков: 50
Длительность: 50,00 минут

Название: test_v2
Год выпуска: 2001
Стиль: v2
Количество треков: 60
Длительность: 60,00 минут

Название: test_v3
Год выпуска: 2002
Стиль: v3
Количество треков: 70
Длительность: 70,00 минут

Название: test_v4
Год выпуска: 2003
Стиль: v4
Количество треков: 80
Длительность: 80,00 минут

Название: test_v4
Год выпуска: 2004
Стиль: v5
Количество треков: 90
Длительность: 90,00 минут

Подходящие альбомы:

Название: test_v1
Год выпуска: 2000
Стиль: v1
Количество треков: 50
Длительность: 50,00 минут

Файл успешно записан.
```

## 3. Информация о разработчике

Шалаев Максим [БИЦ-252]
